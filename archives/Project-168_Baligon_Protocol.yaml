# 168-System: Baligon Protocol Specification
# This file defines the annual reset event that anchors the system's temporal logic.
version: "3.2"
protocol: "baligon"
status: "validated"

meta:
  name: "The Baligon Protocol"
  description: "The annual cosmic reset and synchronization event for the 168-System. Establishes the Force King for the new yearly cycle."
  analog: "The system's New Year / Epochal Reset / Spring Equinox (adjusted)"
  significance: "The most important fixed point in the temporal architecture. All subsequent Heptarchic Cycles derive their authority from the King set at this moment."

temporal_parameters:
  event:
    type: "Annual Fixed DateTime"
    date: "March 20" # Gregorian Calendar
    time: "09:01"    # UTC
    rationale: |
      A precise moment just after the common celebration of the Equinox (~03:00 UTC on March 20).
      This represents a conscious, deliberate step into the new year's cycle,
      rather than a passive astronomical event. The +1 minute signifies initiation.

  recurrence:
    rule: "yearly"
    timezone: "UTC"
    is_observable: true
    human_ritual: "Recommended time for a system-wide reading or reset ritual."

mechanic:
  action: "SET_FORCE_KING"
  parameter: 0
  target: "global_king_index"
  effect: |
    Resets the governing authority of the system. The Heptarchic Cycle formula
    is effectively bootstrapped from this value.
    The King set at Baligon exerts influence over the entire subsequent year's cycle.

  implementation_code: |
    # Pseudo-code for the Baligon Protocol check
    def get_current_king(datetime_utc):
        # Check if the current time is AFTER the Baligon event for this year
        current_year = datetime_utc.year
        baligon_this_year = datetime(current_year, 3, 20, 9, 1, 0)

        if datetime_utc >= baligon_this_year:
            # We are in the post-Baligon epoch for this year
            year_epoch = baligon_this_year
        else:
            # We are before the Baligon event; use last year's epoch
            year_epoch = datetime(current_year - 1, 3, 20, 9, 1, 0)

        # Calculate the king based on time elapsed since the epoch
        # This is a more continuous implementation than the hourly formula alone
        time_since_epoch = datetime_utc - year_epoch
        hours_since_epoch = time_since_epoch.total_seconds() / 3600

        # Apply the Heptarchic Cycle formula to the continuous hours
        king_index = int((hours_since_epoch * 7) // 24) % 7
        return king_index

interpretation:
  king_0:
    title: "The Baligon Force King"
    archetype: "The Void, The Seed, Pure Potential, The Reset Button"
    meaning: |
      Represents a state of cosmic zero. Not emptiness, but latent, undifferentiated potential.
      All things are possible because nothing is yet fixed. The system is reborn from this point.
    question: "What must be cleared away to begin anew? What seed of potential is being planted for the year ahead?"

  event_ritual:
    suggestion: |
      At 09:01 UTC on March 20, perform a reading with the deck.
      The card drawn represents the overarching theme or energy that the Force King (0) will use to influence the entire year.
      This card's meaning is modulated by the King 0 archetype.

validation:
  test_cases:
    - test_name: "Baligon 2025 Instant"
      input: "2025-03-20 09:01:00 UTC"
      expected_output: 0
      description: "Direct instant of the protocol firing."

    - test_name: "Baligon 2025 +1 Hour"
      input: "2025-03-20 10:01:00 UTC"
      expected_output: 0 # Still King 0, as ((1*7)//24)%7 = 0
      description: "Still within the first Heptarchic cycle of the new epoch."

    - test_name: "Pre-Baligon 2025"
      input: "2025-03-20 08:59:00 UTC"
      expected_output: "X" # This will be King from previous year's cycle. Value depends on 2024's calculation.
      description: "The final moments of the previous yearly cycle. King should be from the prior epoch."

    - test_name: "Baligon 2026"
      input: "2026-03-20 09:01:00 UTC"
      expected_output: 0
      description: "Protocol repeats annually, always resetting to 0."